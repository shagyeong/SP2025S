{% extends 'instructor/base_instructor.html' %}
{% load static %}

{% block title %}êµìˆ˜ì ì¶œê²° í™•ì¸{% endblock %}

{% block content %}
<div class="instructor-page">
    <h1>ğŸ‘¨â€ğŸ« ì¶œê²° ê´€ë¦¬</h1>

    <section class="team-list-section">
        <h2>íŒ€ ëª…ë‹¨</h2>
        <table class="team-table">
            <thead>
                <tr>
                    <th>íŒ€ ì´ë¦„</th>
                    <th>íŒ€ì¥</th>
                    <th>ì¶œê²° í™•ì¸</th>
                </tr>
            </thead>
            <tbody id="team-table-body">
                <!-- JSë¡œ ë™ì  ë Œë”ë§ -->
            </tbody>
        </table>
    </section>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', () => {
    fetch("/team/team_list/")
        .then(res => res.json())
        .then(data => {
            const tbody = document.getElementById("team-table-body");
            tbody.innerHTML = "";

            data.forEach(team => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${team.team_name}</td>
                    <td>${team.leader_name || team.leader_id}</td>
                    <td>
                        <a class="btn btn-view" href="/attendance/instructor/detail/?team_id=${encodeURIComponent(team.team_id)}">ì¶œê²° ë³´ê¸°</a>
                    </td>
                `;
                // íŒ€ì¥ ì´ë¦„ì´ ì—†ì„ ê²½ìš° í•™ë²ˆìœ¼ë¡œ í‘œì‹œ
                tbody.appendChild(row);
            });
        })
        .catch(error => {
            console.error("íŒ€ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨:", error);
            const tbody = document.getElementById("team-table-body");
            tbody.innerHTML = `<tr><td colspan="3">âŒ íŒ€ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</td></tr>`;
        });
});
</script>
{% endblock %}

